/* ************************************************************************** */
/* ************************************************************************** */
/* ************************************************************************** */
/* ************************************************************************** */
/* ************************************************************************** */
/* ************************************************************************** */
/* ************************************************************************** */
/* ************************************************************************** */
/* ************************************************************************** */
/* ************************************************************************** */
/* ************************************************************************** */
/* ************************************************************************** */
/* ************************************************************************** */

#include "../include/minishell.h"

int	main(int argn, char **argv, char **env)
{
	char	*here;
	char	*current;
	char	**commands;

	if (argn > 1 || argv[1])
		return (printf("Error: bad number of arguments\n"), 0);
	print_minishell();
	while (1)
	{
		current = first_line();
		ft_putstr_fd(current, 1);
		here = get_next_line(0);
		if (ft_strncmp(here, "exit\n", ft_strlen(here)) == 0)
			break ;
		commands = line_split(here);
		if (ft_fullcmp(commands[0], "cd") == 0)
			change_cd(commands);
		else if (search_op(here))
			ft_operator(commands, here, env);
		else if (ft_fullcmp(commands[0], "echo") == 0)
			ft_echo(commands);
		else if (ft_fullcmp(commands[0], "pwd") == 0)
			ft_pwd();
		else if (!commands[0])
			continue ;
		else
			ft_command(commands, env);
		free(here);
		free(current);
		ft_free(commands);
	}
	free(here);
	free(current);
	exit(0);
	return (0);
}
